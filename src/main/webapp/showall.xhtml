<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <title>Sunday School Written Competition Student Registration</title>
    <h:outputStylesheet library="css" name="table-style.css"/>
</h:head>
<h:body>
    <ui:composition template="/commonLayout.xhtml">
        <ui:define name="content">
            <p:tabView id="adminTabs">
                <p:tab id="tab1" title="Search">
                    <h:form>
                        <table>
                            <tr>
                                <td valign="top">
                                    <p:panelGrid id="panel" columns="2">
                                        <f:facet name="header">Search Form</f:facet>
                                        <h:outputLabel for="church" value="Church"/>
                                        <p:selectOneMenu id="church" label="Select Church"
                                                         value="#{registrationBean.church}">
                                            <f:selectItems value="#{registrationBean.availableChurches}"/>
                                            <f:selectItem itemValue="All" itemLabel="All"/>
                                        </p:selectOneMenu>

                                        <h:outputLabel for="category" value="Category"/>
                                        <p:selectOneMenu id="category" label="Select Category"
                                                         value="#{registrationBean.category}">
                                            <f:selectItems value="#{registrationBean.availableCategories}"/>
                                            <f:selectItem itemValue="All" itemLabel="All"/>
                                        </p:selectOneMenu>

                                        <h:outputLabel for="group" value="Group"/>
                                        <p:selectOneMenu id="group" label="Select Group"
                                                         value="#{registrationBean.group}">
                                            <f:selectItems value="#{registrationBean.availableGroups}"/>
                                            <f:selectItem itemValue="All" itemLabel="All"/>
                                        </p:selectOneMenu>

                                        <h:outputLabel for="venue" value="Venue"/>
                                        <p:selectOneMenu id="venue" label="Select Venue"
                                                         value="#{registrationBean.venue}">
                                            <f:selectItems value="#{registrationBean.venueChurches}"/>
                                            <f:selectItem itemValue="All" itemLabel="All"/>
                                        </p:selectOneMenu>

                                        <f:facet name="footer">
                                            <p:commandButton id="search" value="Search"
                                                             action="#{registrationBean.performSearch}" update="list"/>
                                        </f:facet>
                                    </p:panelGrid>
                                    <p:blockUI block="panel" trigger="search"/>
                                </td>
                                <td valign="top">
                                    <p:dataTable id="list" var="studentInfo" value="#{registrationBean.searchList}"
                                                 styleClass="order-table"
                                                 headerClass="order-table-header"
                                                 rowClasses="order-table-odd-row,order-table-even-row">
                                        <p:column sortBy="#{studentInfo.category}">
                                            <f:facet name="header">
                                                <h:outputText value="Category"/>
                                            </f:facet>
                                            <h:outputText value="#{studentInfo.categoryCode}"/>
                                        </p:column>
                                        <p:column sortBy="#{studentInfo.id}">
                                            <f:facet name="header">
                                                <h:outputText value="ID"/>
                                            </f:facet>
                                            <h:outputText value="#{studentInfo.id}"/>
                                        </p:column>
                                        <p:column sortBy="#{studentInfo.firstName}">
                                            <f:facet name="header">
                                                <h:outputText value="First Name"/>
                                            </f:facet>
                                            <h:outputText value="#{studentInfo.firstName}"/>
                                        </p:column>
                                        <p:column sortBy="#{studentInfo.middleName}">
                                            <f:facet name="header">
                                                <h:outputText value="Middle Name"/>
                                            </f:facet>
                                            <h:outputText value="#{studentInfo.middleName}"/>
                                        </p:column>
                                        <p:column sortBy="#{studentInfo.lastName}">
                                            <f:facet name="header">
                                                <h:outputText value="Last Name"/>
                                            </f:facet>
                                            <h:outputText value="#{studentInfo.lastName}"/>
                                        </p:column>
                                        <p:column sortBy="#{studentInfo.church}">
                                            <f:facet name="header">
                                                <h:outputText value="Church"/>
                                            </f:facet>
                                            <h:outputText value="#{studentInfo.church}"/>
                                        </p:column>
                                        <p:column sortBy="#{studentInfo.ssGroup}">
                                            <f:facet name="header">
                                                <h:outputText value="Group"/>
                                            </f:facet>
                                            <h:outputText value="#{studentInfo.ssGroup}"/>
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Venue"/>
                                            </f:facet>
                                            <h:outputText value="#{studentInfo.venue}"/>
                                        </p:column>
                                        <p:column sortBy="#{studentInfo.judge1Marks}">
                                            <f:facet name="header">
                                                <h:outputText value="Judge1 Marks"/>
                                            </f:facet>
                                            <h:outputText value="#{studentInfo.judge1Marks}"/>
                                        </p:column>
                                        <p:column sortBy="#{studentInfo.judge2Marks}">
                                            <f:facet name="header">
                                                <h:outputText value="Judge2 Marks"/>
                                            </f:facet>
                                            <h:outputText value="#{studentInfo.judge2Marks}"/>
                                        </p:column>
                                        <p:column sortBy="#{studentInfo.judge3Marks}">
                                            <f:facet name="header">
                                                <h:outputText value="Judge3 Marks"/>
                                            </f:facet>
                                            <h:outputText value="#{studentInfo.judge3Marks}"/>
                                        </p:column>
                                        <!-- <p:column headerText="Judge4" sortBy="#{studentInfo.judge4Marks}">
                                             <h:outputText value="#{studentInfo.judge4Marks}"/>
                                         </p:column>
                                         <p:column headerText="Judge5" sortBy="#{studentInfo.judge5Marks}">
                                             <h:outputText value="#{studentInfo.judge5Marks}"/>
                                         </p:column>
                                         <p:column headerText="Judge6" sortBy="#{studentInfo.judge6Marks}">
                                             <h:outputText value="#{studentInfo.judge6Marks}"/>
                                         </p:column>-->
                                        <p:column sortBy="#{studentInfo.totalMarks}">
                                            <f:facet name="header">
                                                <h:outputText value="Total Marks"/>
                                            </f:facet>
                                            <h:outputText value="#{studentInfo.totalMarks}"/>
                                        </p:column>
                                    </p:dataTable>

                                    <p:commandButton value="Export XLS" ajax="false" icon="images/excel.png">
                                        <p:dataExporter type="xls" target="list" fileName="studentsList"/>
                                    </p:commandButton>
                                </td>
                            </tr>
                        </table>
                        <p><h:messages/></p>
                    </h:form>
                </p:tab>
                <p:tab id="tab2" title="Update">
                    <h:form id="updateform">
                        <p:panelGrid id="updatepanel" columns="2">
                            <f:facet name="header">Registration Update Form </f:facet>

                            <h:outputLabel for="registrationId" value="Registration ID"/>
                            <p:inputText id="registrationId" size="20" value="#{registrationBean.id}"/>

                            <h:outputLabel for="firstname" value="First Name"/>
                            <p:inputText id="firstname" size="20" value="#{registrationBean.firstName}"/>

                            <h:outputLabel for="middlename" value="Middle Name"/>
                            <p:inputText id="middlename" size="20" value="#{registrationBean.middleName}"/>

                            <h:outputLabel for="lastname" value="Last Name"/>
                            <p:inputText id="lastname" size="20" value="#{registrationBean.lastName}"/>


                            <h:outputLabel for="church" value="Church"/>
                            <p:selectOneMenu id="rchurch" label="Select Church" value="#{registrationBean.church}">
                                <f:selectItems value="#{registrationBean.availableChurches}"/>
                            </p:selectOneMenu>

                            <h:outputLabel for="category" value="Category"/>
                            <p:selectOneMenu id="rcategory" label="Select Category"
                                             value="#{registrationBean.category}">
                                <f:selectItems value="#{registrationBean.availableCategories}"/>
                            </p:selectOneMenu>

                            <h:outputLabel for="group" value="Group"/>
                            <p:selectOneMenu id="rgroup" label="Select Group" value="#{registrationBean.group}">
                                <f:selectItems value="#{registrationBean.availableGroups}"/>
                            </p:selectOneMenu>

                            <h:outputLabel for="venue" value="Venue"/>
                            <p:selectOneMenu id="rvenue" label="Select Venue" value="#{registrationBean.venue}">
                                <f:selectItems value="#{registrationBean.venueChurches}"/>
                            </p:selectOneMenu>

                        </p:panelGrid>
                        <p:blockUI block="updatepanel" trigger="update"/>

                        <p><p:messages id="messages" showDetail="true" autoUpdate="true" closable="true"/></p>

                        <p><p:commandButton id="update" value="Update" action="#{registrationBean.updateRegistration}"/>
                        </p>
                        <br/>
                        <br/>
                    </h:form>
                </p:tab>
                <p:tab id="tab3" title="Overall Winners">
                    <h:form>
                        <table>
                            <tr>
                                <td valign="top">
                                    <p:panelGrid id="winners-panel" columns="2">
                                        <f:facet name="header">Winners</f:facet>
										<h:outputLabel for="winnersgroup" value="Winners Groups"/>
                                        <p:selectOneMenu id="winnersgroup" label="Select Winners Group"
                                                         value="#{registrationBean.winnersGroup}">
                                            <f:selectItems value="#{registrationBean.winnersGroups}"/>
                                           
                                        </p:selectOneMenu>
                                        <f:facet name="footer">
                                            <p:commandButton id="winners-search" value="Show Winners"
                                                             action="#{registrationBean.findWinners}" update="winners-list"/>
                                        </f:facet>
                                    </p:panelGrid>
                                    <p:blockUI block="winners-panel" trigger="winners-search"/>
                                </td>
                                <td valign="top">
                                    <p:dataTable id="winners-list" var="winnersInfo" value="#{registrationBean.winnersList}"
                                                 styleClass="order-table"
                                                 headerClass="order-table-header"
                                                 rowClasses="order-table-odd-row,order-table-even-row">

                                        <p:column sortBy="#{winnersInfo.firstName}">
                                            <f:facet name="header">
                                                <h:outputText value="First Name"/>
                                            </f:facet>
                                            <h:outputText value="#{winnersInfo.firstName}"/>
                                        </p:column>
                                        <p:column sortBy="#{winnersInfo.middleName}">
                                            <f:facet name="header">
                                                <h:outputText value="Middle Name"/>
                                            </f:facet>
                                            <h:outputText value="#{winnersInfo.middleName}"/>
                                        </p:column>
                                        <p:column sortBy="#{winnersInfo.lastName}">
                                            <f:facet name="header">
                                                <h:outputText value="Last Name"/>
                                            </f:facet>
                                            <h:outputText value="#{winnersInfo.lastName}"/>
                                        </p:column>
                                        <p:column sortBy="#{winnersInfo.church}">
                                            <f:facet name="header">
                                                <h:outputText value="Church"/>
                                            </f:facet>
                                            <h:outputText value="#{winnersInfo.church}"/>
                                        </p:column>
                                        <p:column sortBy="#{winnersInfo.ssGroup}">
                                            <f:facet name="header">
                                                <h:outputText value="Group"/>
                                            </f:facet>
                                            <h:outputText value="#{winnersInfo.ssGroup}"/>
                                        </p:column>

                                        <p:column sortBy="#{winnersInfo.totalMarks}">
                                            <f:facet name="header">
                                                <h:outputText value="Total Marks"/>
                                            </f:facet>
                                            <h:outputText value="#{winnersInfo.totalMarks}"/>
                                        </p:column>
                                    </p:dataTable>

                                </td>
                            </tr>
                        </table>
                        <p><h:messages/></p>
                    </h:form>
                </p:tab>
            </p:tabView>
        </ui:define>
    </ui:composition>
</h:body>
</html>